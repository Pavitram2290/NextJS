"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{2985:function(a,b,c){c.d(b,{"$":function(){return Qh},A:function(){return k},E:function(){return Bd},G:function(){return Gd},I:function(){return ne},K:function(){return Tb},L:function(){return sf},M:function(){return Tf},N:function(){return Zf},P:function(){return om},Q:function(){return gg},R:function(){return Nl},T:function(){return Ef},U:function(){return Dg},V:function(){return Ng},W:function(){return jh},X:function(){return Bh},Y:function(){return Ch},Z:function(){return Dh},"_":function(){return Fh},a:function(){return Yj},a0:function(){return Rh},a1:function(){return Sh},a2:function(){return Th},a3:function(){return Uh},a4:function(){return Vh},a5:function(){return Wh},a6:function(){return Xh},a7:function(){return Yh},a8:function(){return Zh},a9:function(){return _h},aA:function(){return On},aB:function(){return En},aC:function(){return yd},aG:function(){return qk},aJ:function(){return mg},aa:function(){return ai},ab:function(){return bi},ae:function(){return di},af:function(){return ei},ag:function(){return fi},aj:function(){return wh},ak:function(){return Di},am:function(){return Yi},an:function(){return kj},ao:function(){return yc},ap:function(){return y},aq:function(){return xc},ar:function(){return uc},as:function(){return r},at:function(){return xo},au:function(){return ho},av:function(){return s},aw:function(){return w},ax:function(){return A},ay:function(){return Ub},az:function(){return Qn},b:function(){return Sj},c:function(){return dn},d:function(){return fn},e:function(){return en},f:function(){return Hn},g:function(){return Ln},h:function(){return Jn},i:function(){return pl},j:function(){return Nn},k:function(){return zo},l:function(){return km},m:function(){return lp},n:function(){return wp},o:function(){return j},r:function(){return lm},s:function(){return jm},u:function(){return nm},z:function(){return m}});var d,e=c(4444),f=c(2238),g=c(655),h=c(3333),i=c(8463);const j={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},k={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function l(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m=function(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:"Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling \"connectAuthEmulator()\" sooner.",["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:"This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.",["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},n=l,o=new e.LL("auth","Firebase",l()),p=new h.Yd("@firebase/auth");function q(a,...b){p.logLevel<=h.in.ERROR&&p.error(`Auth (${f.SDK_VERSION}): ${a}`,...b)}function r(a,...b){throw v(a,...b)}function s(a,...b){return v(a,...b)}function t(a,b,c){const d=Object.assign(Object.assign({},n()),{[b]:c}),f=new e.LL("auth","Firebase",d);return f.create(b,{appName:a.name})}function u(a,b,c){const d=c;if(!(b instanceof d))throw d.name!==b.constructor.name&&r(a,"argument-error"),t(a,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(a,...b){if("string"!=typeof a){const c=b[0],d=[...b.slice(1)];return d[0]&&(d[0].appName=a.name),a._errorFactory.create(c,...d)}return o.create(a,...b)}function w(a,b,...c){if(!a)throw v(b,...c)}function x(a){const b="INTERNAL ASSERTION FAILED: "+a;throw q(b),new Error(b)}function y(a,b){a||x(b)}const z=new Map();function A(a){y(a instanceof Function,"Expected a class definition");let b=z.get(a);return b?(y(b instanceof a,"Instance stored in cache mismatched with class"),b):(b=new a(),z.set(a,b),b)}function B(){var a;return"undefined"!=typeof self&&(null===(a=self.location)|| void 0===a?void 0:a.href)||""}function C(){return"http:"===D()||"https:"===D()}function D(){var a;return"undefined"!=typeof self&&(null===(a=self.location)|| void 0===a?void 0:a.protocol)||null}class E{constructor(F,G){this.shortDelay=F,this.longDelay=G,y(G>F,"Short delay should be less than long delay!"),this.isMobile=(0,e.uI)()||(0,e.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(C()||(0,e.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5000,this.shortDelay)}}function H(a,b){y(a.emulator,"Emulator should always be set here");const{url:c}=a.emulator;return b?`${c}${b.startsWith("/")?b.slice(1):b}`:c}class I{static initialize(J,K,L){this.fetchImpl=J,K&&(this.headersImpl=K),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const M={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"internal-error",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error"},N=new E(30e3,60e3);function O(a,b){return a.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:a.tenantId}):b}async function P(a,b,c,d,f={}){return Q(a,f,()=>{let f={},g={};d&&("GET"===b?g=d:f={body:JSON.stringify(d)});const h=(0,e.xO)(Object.assign({key:a.config.apiKey},g)).slice(1),i=new(I.headers())();return i.set("Content-Type","application/json"),i.set("X-Client-Version",a._getSdkClientVersion()),a.languageCode&&i.set("X-Firebase-Locale",a.languageCode),I.fetch()(S(a,a.config.apiHost,c,h),Object.assign({method:b,headers:i,referrerPolicy:"no-referrer"},f))})}async function Q(a,b,c){a._canInitEmulator=!1;const d=Object.assign(Object.assign({},M),b);try{const f=new T(a),g=await Promise.race([c(),f.promise]);f.clearNetworkTimeout();const h=await g.json();if("needConfirmation"in h)throw V(a,"account-exists-with-different-credential",h);if(g.ok&&!("errorMessage"in h))return h;{const i=g.ok?h.errorMessage:h.error.message,[j,k]=i.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===j)throw V(a,"credential-already-in-use",h);if("EMAIL_EXISTS"===j)throw V(a,"email-already-in-use",h);const l=d[j]||j.toLowerCase().replace(/[_\s]+/g,"-");if(k)throw t(a,l,k);r(a,l)}}catch(m){if(m instanceof e.ZR)throw m;r(a,"network-request-failed")}}async function R(a,b,c,d,e={}){const f=await P(a,b,c,d,e);return"mfaPendingCredential"in f&&r(a,"multi-factor-auth-required",{_serverResponse:f}),f}function S(a,b,c,d){const e=`${b}${c}?${d}`;return a.config.emulator?H(a.config,e):`${a.config.apiScheme}://${e}`}class T{constructor(U){this.auth=U,this.timer=null,this.promise=new Promise((a,b)=>{this.timer=setTimeout(()=>b(s(this.auth,"timeout")),N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(a,b,c){const d={appName:a.name};c.email&&(d.email=c.email),c.phoneNumber&&(d.phoneNumber=c.phoneNumber);const e=s(a,b,d);return e.customData._tokenResponse=c,e}async function W(a,b){return P(a,"POST","/v1/accounts:delete",b)}async function X(a,b){return P(a,"POST","/v1/accounts:update",b)}async function Y(a,b){return P(a,"POST","/v1/accounts:lookup",b)}function Z(a){if(a)try{const b=new Date(Number(a));if(!isNaN(b.getTime()))return b.toUTCString()}catch(c){}}async function $(a,b=!1){const c=(0,e.m9)(a),d=await c.getIdToken(b),f=aa(d);w(f&&f.exp&&f.auth_time&&f.iat,c.auth,"internal-error");const g="object"==typeof f.firebase?f.firebase:void 0,h=null==g?void 0:g.sign_in_provider;return{claims:f,token:d,authTime:Z(_(f.auth_time)),issuedAtTime:Z(_(f.iat)),expirationTime:Z(_(f.exp)),signInProvider:h||null,signInSecondFactor:(null==g?void 0:g.sign_in_second_factor)||null}}function _(a){return 1000*Number(a)}function aa(a){const[b,c,d]=a.split(".");if(void 0===b|| void 0===c|| void 0===d)return q("JWT malformed, contained fewer than 3 sections"),null;try{const f=(0,e.tV)(c);if(!f)return q("Failed to decode base64 JWT payload"),null;return JSON.parse(f)}catch(g){return q("Caught error parsing JWT payload as JSON",g),null}}async function ba(a,b,c=!1){if(c)return b;try{return await b}catch(d){throw d instanceof e.ZR&&ca(d)&&a.auth.currentUser===a&&await a.auth.signOut(),d}}function ca({code:a}){return"auth/user-disabled"===a||"auth/user-token-expired"===a}class da{constructor(ea,fa){this.createdAt=ea,this.lastLoginAt=fa,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(ga){this.createdAt=ga.createdAt,this.lastLoginAt=ga.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ha(a){var b;const c=a.auth,d=await a.getIdToken(),e=await ba(a,Y(c,{idToken:d}));w(null==e?void 0:e.users.length,c,"internal-error");const f=e.users[0];a._notifyReloadListener(f);const g=(null===(b=f.providerUserInfo)|| void 0===b?void 0:b.length)?ka(f.providerUserInfo):[],h=ja(a.providerData,g),i=a.isAnonymous,j=!(a.email&&f.passwordHash)&&!(null==h?void 0:h.length),k={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:h,metadata:new da(f.createdAt,f.lastLoginAt),isAnonymous:!!i&&j};Object.assign(a,k)}async function ia(a){const b=(0,e.m9)(a);await ha(b),await b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)}function ja(a,b){const c=a.filter(a=>!b.some(b=>b.providerId===a.providerId));return[...c,...b]}function ka(a){return a.map(a=>{var{providerId:b}=a,c=(0,g._T)(a,["providerId"]);return{providerId:b,uid:c.rawId||"",displayName:c.displayName||null,email:c.email||null,phoneNumber:c.phoneNumber||null,photoURL:c.photoUrl||null}})}async function la(a,b){const c=await Q(a,{},()=>{const c=(0,e.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:d,apiKey:f}=a.config,g=S(a,d,"/v1/token",`key=${f}`);return I.fetch()(g,{method:"POST",headers:{"X-Client-Version":a._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:c})});return{accessToken:c.access_token,expiresIn:c.expires_in,refreshToken:c.refresh_token}}class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-30e3}updateFromServerResponse(na){w(na.idToken,"internal-error"),w(void 0!==na.idToken,"internal-error"),w(void 0!==na.refreshToken,"internal-error");const oa="expiresIn"in na&& void 0!==na.expiresIn?Number(na.expiresIn):function(a){const b=aa(a);return w(b,"internal-error"),w(void 0!==b.exp,"internal-error"),w(void 0!==b.iat,"internal-error"),Number(b.exp)-Number(b.iat)}(na.idToken);this.updateTokensAndExpiration(na.idToken,na.refreshToken,oa)}async getToken(pa,qa=!1){return(w(!this.accessToken||this.refreshToken,pa,"user-token-expired"),qa||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(pa,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(ra,sa){const{accessToken:ta,refreshToken:ua,expiresIn:va}=await la(ra,sa);this.updateTokensAndExpiration(ta,ua,Number(va))}updateTokensAndExpiration(wa,xa,ya){this.refreshToken=xa||null,this.accessToken=wa||null,this.expirationTime=Date.now()+1000*ya}static fromJSON(za,Aa){const{refreshToken:Ba,accessToken:Ca,expirationTime:Da}=Aa,Ea=new ma();return Ba&&(w("string"==typeof Ba,"internal-error",{appName:za}),Ea.refreshToken=Ba),Ca&&(w("string"==typeof Ca,"internal-error",{appName:za}),Ea.accessToken=Ca),Da&&(w("number"==typeof Da,"internal-error",{appName:za}),Ea.expirationTime=Da),Ea}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(Fa){this.accessToken=Fa.accessToken,this.refreshToken=Fa.refreshToken,this.expirationTime=Fa.expirationTime}_clone(){return Object.assign(new ma(),this.toJSON())}_performRefresh(){return x("not implemented")}}function Ga(a,b){w("string"==typeof a|| void 0===a,"internal-error",{appName:b})}class Ha{constructor(Ia){var{uid:Ja,auth:Ka,stsTokenManager:La}=Ia,Ma=(0,g._T)(Ia,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new class{constructor(Na){this.user=Na,this.isRunning=!1,this.timerId=null,this.errorBackoff=30e3}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(Oa){var Pa;if(Oa){const Qa=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,960e3),Qa}{this.errorBackoff=30e3;const Ra=null!==(Pa=this.user.stsTokenManager.expirationTime)&& void 0!==Pa?Pa:0,Sa=Ra-Date.now()-30e4;return Math.max(0,Sa)}}schedule(Ta=!1){if(this.isRunning){const Ua=this.getInterval(Ta);this.timerId=setTimeout(async()=>{await this.iteration()},Ua)}}async iteration(){try{await this.user.getIdToken(!0)}catch(Va){"auth/network-request-failed"===Va.code&&this.schedule(!0);return}this.schedule()}}(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=Ja,this.auth=Ka,this.stsTokenManager=La,this.accessToken=La.accessToken,this.displayName=Ma.displayName||null,this.email=Ma.email||null,this.emailVerified=Ma.emailVerified||!1,this.phoneNumber=Ma.phoneNumber||null,this.photoURL=Ma.photoURL||null,this.isAnonymous=Ma.isAnonymous||!1,this.tenantId=Ma.tenantId||null,this.metadata=new da(Ma.createdAt||void 0,Ma.lastLoginAt||void 0)}async getIdToken(Wa){const Xa=await ba(this,this.stsTokenManager.getToken(this.auth,Wa));return w(Xa,this.auth,"internal-error"),this.accessToken!==Xa&&(this.accessToken=Xa,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),Xa}getIdTokenResult(Ya){return $(this,Ya)}reload(){return ia(this)}_assign(Za){this!==Za&&(w(this.uid===Za.uid,this.auth,"internal-error"),this.displayName=Za.displayName,this.photoURL=Za.photoURL,this.email=Za.email,this.emailVerified=Za.emailVerified,this.phoneNumber=Za.phoneNumber,this.isAnonymous=Za.isAnonymous,this.tenantId=Za.tenantId,this.providerData=Za.providerData.map(a=>Object.assign({},a)),this.metadata._copy(Za.metadata),this.stsTokenManager._assign(Za.stsTokenManager))}_clone($a){return new Ha(Object.assign(Object.assign({},this),{auth:$a,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_a){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_a,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(ab){this.reloadListener?this.reloadListener(ab):this.reloadUserInfo=ab}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(bb,cb=!1){let db=!1;bb.idToken&&bb.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(bb),db=!0),cb&&await ha(this),await this.auth._persistUserIfCurrent(this),db&&this.auth._notifyListenersIfCurrent(this)}async delete(){const eb=await this.getIdToken();return await ba(this,W(this.auth,{idToken:eb})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(a=>Object.assign({},a)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(fb,gb){var hb,ib,jb,kb,lb,mb,nb,ob;const pb=null!==(hb=gb.displayName)&& void 0!==hb?hb:void 0,qb=null!==(ib=gb.email)&& void 0!==ib?ib:void 0,rb=null!==(jb=gb.phoneNumber)&& void 0!==jb?jb:void 0,sb=null!==(kb=gb.photoURL)&& void 0!==kb?kb:void 0,tb=null!==(lb=gb.tenantId)&& void 0!==lb?lb:void 0,ub=null!==(mb=gb._redirectEventId)&& void 0!==mb?mb:void 0,vb=null!==(nb=gb.createdAt)&& void 0!==nb?nb:void 0,wb=null!==(ob=gb.lastLoginAt)&& void 0!==ob?ob:void 0,{uid:xb,emailVerified:yb,isAnonymous:zb,providerData:Ab,stsTokenManager:Bb}=gb;w(xb&&Bb,fb,"internal-error");const Cb=ma.fromJSON(this.name,Bb);w("string"==typeof xb,fb,"internal-error"),Ga(pb,fb.name),Ga(qb,fb.name),w("boolean"==typeof yb,fb,"internal-error"),w("boolean"==typeof zb,fb,"internal-error"),Ga(rb,fb.name),Ga(sb,fb.name),Ga(tb,fb.name),Ga(ub,fb.name),Ga(vb,fb.name),Ga(wb,fb.name);const Db=new Ha({uid:xb,auth:fb,email:qb,emailVerified:yb,displayName:pb,isAnonymous:zb,photoURL:sb,phoneNumber:rb,tenantId:tb,stsTokenManager:Cb,createdAt:vb,lastLoginAt:wb});return Ab&&Array.isArray(Ab)&&(Db.providerData=Ab.map(a=>Object.assign({},a))),ub&&(Db._redirectEventId=ub),Db}static async _fromIdTokenResponse(Eb,Fb,Gb=!1){const Hb=new ma();Hb.updateFromServerResponse(Fb);const Ib=new Ha({uid:Fb.localId,auth:Eb,stsTokenManager:Hb,isAnonymous:Gb});return await ha(Ib),Ib}}class Jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(Kb,Lb){this.storage[Kb]=Lb}async _get(Mb){const Nb=this.storage[Mb];return void 0===Nb?null:Nb}async _remove(Ob){delete this.storage[Ob]}_addListener(Pb,Qb){}_removeListener(Rb,Sb){}}Jb.type="NONE";const Tb=Jb;function Ub(a,b,c){return`firebase:${a}:${b}:${c}`}class Vb{constructor(Wb,Xb,Yb){this.persistence=Wb,this.auth=Xb,this.userKey=Yb;const{config:Zb,name:$b}=this.auth;this.fullUserKey=Ub(this.userKey,Zb.apiKey,$b),this.fullPersistenceKey=Ub("persistence",Zb.apiKey,$b),this.boundEventHandler=Xb._onStorageEvent.bind(Xb),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_b){return this.persistence._set(this.fullUserKey,_b.toJSON())}async getCurrentUser(){const ac=await this.persistence._get(this.fullUserKey);return ac?Ha._fromJSON(this.auth,ac):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(bc){if(this.persistence!==bc){const cc=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=bc,cc)return this.setCurrentUser(cc)}}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(dc,ec,fc="authUser"){if(!ec.length)return new Vb(A(Tb),dc,fc);const gc=(await Promise.all(ec.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a);let hc=gc[0]||A(Tb);const ic=Ub(fc,dc.config.apiKey,dc.name);let jc=null;for(const kc of ec)try{const lc=await kc._get(ic);if(lc){const mc=Ha._fromJSON(dc,lc);kc!==hc&&(jc=mc),hc=kc;break}}catch(nc){}const oc=gc.filter(a=>a._shouldAllowMigration);return hc._shouldAllowMigration&&oc.length&&(hc=oc[0],jc&&await hc._set(ic,jc.toJSON()),await Promise.all(ec.map(async a=>{if(a!==hc)try{await a._remove(ic)}catch(b){}}))),new Vb(hc,dc,fc)}}function pc(a){const b=a.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";{if(tc(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(qc(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(vc(b))return"Blackberry";if(wc(b))return"Webos";if(rc(b))return"Safari";if((b.includes("chrome/")||sc(b))&&!b.includes("edge/"))return"Chrome";if(uc(b))return"Android";const c=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,d=a.match(c);if((null==d?void 0:d.length)===2)return d[1]}return"Other"}function qc(a=(0,e.z$)()){return/firefox\//i.test(a)}function rc(a=(0,e.z$)()){const b=a.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function sc(a=(0,e.z$)()){return/crios\//i.test(a)}function tc(a=(0,e.z$)()){return/iemobile/i.test(a)}function uc(a=(0,e.z$)()){return/android/i.test(a)}function vc(a=(0,e.z$)()){return/blackberry/i.test(a)}function wc(a=(0,e.z$)()){return/webos/i.test(a)}function xc(a=(0,e.z$)()){return/iphone|ipad|ipod/i.test(a)}function yc(a=(0,e.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(a)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(a)}function zc(a=(0,e.z$)()){return xc(a)||uc(a)||wc(a)||vc(a)||/windows phone/i.test(a)||tc(a)}function Ac(a,b=[]){let c;switch(a){case"Browser":c=pc((0,e.z$)());break;case"Worker":c=`${pc((0,e.z$)())}-${a}`;break;default:c=a}const d=b.length?b.join(","):"FirebaseCore-web";return`${c}/JsCore/${f.SDK_VERSION}/${d}`}class Bc{constructor(Cc,Dc){this.app=Cc,this.config=Dc,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zd(this),this.idTokenSubscription=new zd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=Cc.name,this.clientVersion=Dc.sdkClientVersion}_initializeWithPersistence(Ec,Fc){return Fc&&(this._popupRedirectResolver=A(Fc)),this._initializationPromise=this.queue(async()=>{var a,b;this._deleted||(this.persistenceManager=await Vb.create(this,Ec),!this._deleted&&((null===(a=this._popupRedirectResolver)|| void 0===a?void 0:a._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(Fc),this.lastNotifiedUid=(null===(b=this.currentUser)|| void 0===b?void 0:b.uid)||null,this._deleted||(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(!this._deleted){const Gc=await this.assertedPersistence.getCurrentUser();if(this.currentUser||Gc){if(this.currentUser&&Gc&&this.currentUser.uid===Gc.uid){this._currentUser._assign(Gc),await this.currentUser.getIdToken();return}await this._updateCurrentUser(Gc)}}}async initializeCurrentUser(Hc){var Ic;let Jc=await this.assertedPersistence.getCurrentUser();if(Hc&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const Kc=null===(Ic=this.redirectUser)|| void 0===Ic?void 0:Ic._redirectEventId,Lc=null==Jc?void 0:Jc._redirectEventId,Mc=await this.tryRedirectSignIn(Hc);(!Kc||Kc===Lc)&&(null==Mc?void 0:Mc.user)&&(Jc=Mc.user)}return Jc?Jc._redirectEventId&&(w(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===Jc._redirectEventId)?this.directlySetCurrentUser(Jc):this.reloadAndSetCurrentUserOrClear(Jc):this.directlySetCurrentUser(null)}async tryRedirectSignIn(Nc){let Oc=null;try{Oc=await this._popupRedirectResolver._completeRedirectFn(this,Nc,!0)}catch(Pc){await this._setRedirectUser(null)}return Oc}async reloadAndSetCurrentUserOrClear(Qc){try{await ha(Qc)}catch(Rc){if("auth/network-request-failed"!==Rc.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(Qc)}useDeviceLanguage(){this.languageCode=(function(){if("undefined"==typeof navigator)return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null})()}async _delete(){this._deleted=!0}async updateCurrentUser(Sc){const Tc=Sc?(0,e.m9)(Sc):null;return Tc&&w(Tc.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(Tc&&Tc._clone(this))}async _updateCurrentUser(Uc){if(!this._deleted)return Uc&&w(this.tenantId===Uc.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(Uc),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(Vc){return this.queue(async()=>{await this.assertedPersistence.setPersistence(A(Vc))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(Wc){this._errorFactory=new e.LL("auth","Firebase",Wc())}onAuthStateChanged(Xc,Yc,Zc){return this.registerStateListener(this.authStateSubscription,Xc,Yc,Zc)}onIdTokenChanged($c,_c,ad){return this.registerStateListener(this.idTokenSubscription,$c,_c,ad)}toJSON(){var bd;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(bd=this._currentUser)|| void 0===bd?void 0:bd.toJSON()}}async _setRedirectUser(cd,dd){const ed=await this.getOrInitRedirectPersistenceManager(dd);return null===cd?ed.removeCurrentUser():ed.setCurrentUser(cd)}async getOrInitRedirectPersistenceManager(fd){if(!this.redirectPersistenceManager){const gd=fd&&A(fd)||this._popupRedirectResolver;w(gd,this,"argument-error"),this.redirectPersistenceManager=await Vb.create(this,[A(gd._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(hd){var id,jd;return(this._isInitialized&&await this.queue(async()=>{}),(null===(id=this._currentUser)|| void 0===id?void 0:id._redirectEventId)===hd)?this._currentUser:(null===(jd=this.redirectUser)|| void 0===jd?void 0:jd._redirectEventId)===hd?this.redirectUser:null}async _persistUserIfCurrent(kd){if(kd===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(kd))}_notifyListenersIfCurrent(ld){ld===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var md,nd;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);const od=null!==(nd=null===(md=this.currentUser)|| void 0===md?void 0:md.uid)&& void 0!==nd?nd:null;this.lastNotifiedUid!==od&&(this.lastNotifiedUid=od,this.authStateSubscription.next(this.currentUser))}}registerStateListener(pd,qd,rd,sd){if(this._deleted)return()=>{};const td="function"==typeof qd?qd:qd.next.bind(qd),ud=this._isInitialized?Promise.resolve():this._initializationPromise;return(w(ud,this,"internal-error"),ud.then(()=>td(this.currentUser)),"function"==typeof qd)?pd.addObserver(qd,rd,sd):pd.addObserver(qd)}async directlySetCurrentUser(vd){this.currentUser&&this.currentUser!==vd&&(this._currentUser._stopProactiveRefresh(),vd&&this.isProactiveRefreshEnabled&&vd._startProactiveRefresh()),this.currentUser=vd,vd?await this.assertedPersistence.setCurrentUser(vd):await this.assertedPersistence.removeCurrentUser()}queue(wd){return this.operations=this.operations.then(wd,wd),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(xd){!xd||this.frameworks.includes(xd)||(this.frameworks.push(xd),this.frameworks.sort(),this.clientVersion=Ac(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function yd(a){return(0,e.m9)(a)}class zd{constructor(Ad){this.auth=Ad,this.observer=null,this.addObserver=(0,e.ne)(a=>this.observer=a)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bd(a,b,c){const d=yd(a);w(d._canInitEmulator,d,"emulator-config-failed"),w(/^https?:\/\//.test(b),d,"invalid-emulator-scheme");const e=!!(null==c?void 0:c.disableWarnings),f=Cd(b),{host:g,port:h}=Dd(b),i=null===h?"":`:${h}`;d.config.emulator={url:`${f}//${g}${i}/`},d.settings.appVerificationDisabledForTesting=!0,d.emulatorConfig=Object.freeze({host:g,port:h,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:e})}),e||Fd()}function Cd(a){const b=a.indexOf(":");return b<0?"":a.substr(0,b+1)}function Dd(a){const b=Cd(a),c=/(\/\/)?([^?#/]+)/.exec(a.substr(b.length));if(!c)return{host:"",port:null};const d=c[2].split("@").pop()||"",e=/^(\[[^\]]+\])(:|$)/.exec(d);if(e){const f=e[1];return{host:f,port:Ed(d.substr(f.length+1))}}{const[g,h]=d.split(":");return{host:g,port:Ed(h)}}}function Ed(a){if(!a)return null;const b=Number(a);return isNaN(b)?null:b}function Fd(){function a(){const a=document.createElement("p"),b=a.style;a.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",a.classList.add("firebase-emulator-warning"),document.body.appendChild(a)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a())}class Gd{constructor(Hd,Id){this.providerId=Hd,this.signInMethod=Id}toJSON(){return x("not implemented")}_getIdTokenResponse(Jd){return x("not implemented")}_linkToIdToken(Kd,Ld){return x("not implemented")}_getReauthenticationResolver(Md){return x("not implemented")}}async function Nd(a,b){return P(a,"POST","/v1/accounts:resetPassword",O(a,b))}async function Od(a,b){return P(a,"POST","/v1/accounts:update",b)}async function Pd(a,b){return P(a,"POST","/v1/accounts:update",O(a,b))}async function Qd(a,b){return R(a,"POST","/v1/accounts:signInWithPassword",O(a,b))}async function Rd(a,b){return P(a,"POST","/v1/accounts:sendOobCode",O(a,b))}async function Sd(a,b){return Rd(a,b)}async function Td(a,b){return Rd(a,b)}async function Ud(a,b){return Rd(a,b)}async function Vd(a,b){return Rd(a,b)}async function Wd(a,b){return R(a,"POST","/v1/accounts:signInWithEmailLink",O(a,b))}async function Xd(a,b){return R(a,"POST","/v1/accounts:signInWithEmailLink",O(a,b))}class Yd extends Gd{constructor(Zd,$d,_d,ae=null){super("password",_d),this._email=Zd,this._password=$d,this._tenantId=ae}static _fromEmailAndPassword(be,ce){return new Yd(be,ce,"password")}static _fromEmailAndCode(de,ee,fe=null){return new Yd(de,ee,"emailLink",fe)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(ge){const he="string"==typeof ge?JSON.parse(ge):ge;if((null==he?void 0:he.email)&&(null==he?void 0:he.password)){if("password"===he.signInMethod)return this._fromEmailAndPassword(he.email,he.password);if("emailLink"===he.signInMethod)return this._fromEmailAndCode(he.email,he.password,he.tenantId)}return null}async _getIdTokenResponse(ie){switch(this.signInMethod){case"password":return Qd(ie,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Wd(ie,{email:this._email,oobCode:this._password});default:r(ie,"internal-error")}}async _linkToIdToken(je,ke){switch(this.signInMethod){case"password":return Od(je,{idToken:ke,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Xd(je,{idToken:ke,email:this._email,oobCode:this._password});default:r(je,"internal-error")}}_getReauthenticationResolver(le){return this._getIdTokenResponse(le)}}async function me(a,b){return R(a,"POST","/v1/accounts:signInWithIdp",O(a,b))}class ne extends Gd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(oe){const pe=new ne(oe.providerId,oe.signInMethod);return oe.idToken||oe.accessToken?(oe.idToken&&(pe.idToken=oe.idToken),oe.accessToken&&(pe.accessToken=oe.accessToken),oe.nonce&&!oe.pendingToken&&(pe.nonce=oe.nonce),oe.pendingToken&&(pe.pendingToken=oe.pendingToken)):oe.oauthToken&&oe.oauthTokenSecret?(pe.accessToken=oe.oauthToken,pe.secret=oe.oauthTokenSecret):r("argument-error"),pe}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(qe){const re="string"==typeof qe?JSON.parse(qe):qe,{providerId:se,signInMethod:te}=re,ue=(0,g._T)(re,["providerId","signInMethod"]);if(!se||!te)return null;const ve=new ne(se,te);return ve.idToken=ue.idToken||void 0,ve.accessToken=ue.accessToken||void 0,ve.secret=ue.secret,ve.nonce=ue.nonce,ve.pendingToken=ue.pendingToken||null,ve}_getIdTokenResponse(we){const xe=this.buildRequest();return me(we,xe)}_linkToIdToken(ye,ze){const Ae=this.buildRequest();return Ae.idToken=ze,me(ye,Ae)}_getReauthenticationResolver(Be){const Ce=this.buildRequest();return Ce.autoCreate=!1,me(Be,Ce)}buildRequest(){const De={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)De.pendingToken=this.pendingToken;else{const Ee={};this.idToken&&(Ee.id_token=this.idToken),this.accessToken&&(Ee.access_token=this.accessToken),this.secret&&(Ee.oauth_token_secret=this.secret),Ee.providerId=this.providerId,this.nonce&&!this.pendingToken&&(Ee.nonce=this.nonce),De.postBody=(0,e.xO)(Ee)}return De}}async function Fe(a,b){return P(a,"POST","/v1/accounts:sendVerificationCode",O(a,b))}async function Ge(a,b){return R(a,"POST","/v1/accounts:signInWithPhoneNumber",O(a,b))}async function He(a,b){const c=await R(a,"POST","/v1/accounts:signInWithPhoneNumber",O(a,b));if(c.temporaryProof)throw V(a,"account-exists-with-different-credential",c);return c}const Ie={["USER_NOT_FOUND"]:"user-not-found"};async function Je(a,b){const c=Object.assign(Object.assign({},b),{operation:"REAUTH"});return R(a,"POST","/v1/accounts:signInWithPhoneNumber",O(a,c),Ie)}class Ke extends Gd{constructor(Le){super("phone","phone"),this.params=Le}static _fromVerification(Me,Ne){return new Ke({verificationId:Me,verificationCode:Ne})}static _fromTokenResponse(Oe,Pe){return new Ke({phoneNumber:Oe,temporaryProof:Pe})}_getIdTokenResponse(Qe){return Ge(Qe,this._makeVerificationRequest())}_linkToIdToken(Re,Se){return He(Re,Object.assign({idToken:Se},this._makeVerificationRequest()))}_getReauthenticationResolver(Te){return Je(Te,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:Ue,phoneNumber:Ve,verificationId:We,verificationCode:Xe}=this.params;return Ue&&Ve?{temporaryProof:Ue,phoneNumber:Ve}:{sessionInfo:We,code:Xe}}toJSON(){const Ye={providerId:this.providerId};return this.params.phoneNumber&&(Ye.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(Ye.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(Ye.verificationCode=this.params.verificationCode),this.params.verificationId&&(Ye.verificationId=this.params.verificationId),Ye}static fromJSON(Ze){"string"==typeof Ze&&(Ze=JSON.parse(Ze));const{verificationId:$e,verificationCode:_e,phoneNumber:af,temporaryProof:bf}=Ze;return _e||$e||af||bf?new Ke({verificationId:$e,verificationCode:_e,phoneNumber:af,temporaryProof:bf}):null}}class cf{constructor(df){var ef,ff,gf,hf,jf,kf;const lf=(0,e.zd)((0,e.pd)(df)),mf=null!==(ef=lf.apiKey)&& void 0!==ef?ef:null,nf=null!==(ff=lf.oobCode)&& void 0!==ff?ff:null,of=function(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(gf=lf.mode)&& void 0!==gf?gf:null);w(mf&&nf&&of,"argument-error"),this.apiKey=mf,this.operation=of,this.code=nf,this.continueUrl=null!==(hf=lf.continueUrl)&& void 0!==hf?hf:null,this.languageCode=null!==(jf=lf.languageCode)&& void 0!==jf?jf:null,this.tenantId=null!==(kf=lf.tenantId)&& void 0!==kf?kf:null}static parseLink(pf){const qf=function(a){const b=(0,e.zd)((0,e.pd)(a)).link,c=b?(0,e.zd)((0,e.pd)(b)).deep_link_id:null,d=(0,e.zd)((0,e.pd)(a)).deep_link_id,f=d?(0,e.zd)((0,e.pd)(d)).link:null;return f||d||c||b||a}(pf);try{return new cf(qf)}catch(rf){return null}}}class sf{constructor(){this.providerId=sf.PROVIDER_ID}static credential(tf,uf){return Yd._fromEmailAndPassword(tf,uf)}static credentialWithLink(vf,wf){const xf=cf.parseLink(wf);return w(xf,"argument-error"),Yd._fromEmailAndCode(vf,xf.code,xf.tenantId)}}sf.PROVIDER_ID="password",sf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yf{constructor(zf){this.providerId=zf,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(Af){this.defaultLanguageCode=Af}setCustomParameters(Bf){return this.customParameters=Bf,this}getCustomParameters(){return this.customParameters}}class Cf extends yf{constructor(){super(...arguments),this.scopes=[]}addScope(Df){return this.scopes.includes(Df)||this.scopes.push(Df),this}getScopes(){return[...this.scopes]}}class Ef extends Cf{static credentialFromJSON(Ff){const Gf="string"==typeof Ff?JSON.parse(Ff):Ff;return w("providerId"in Gf&&"signInMethod"in Gf,"argument-error"),ne._fromParams(Gf)}credential(Hf){return this._credential(Object.assign(Object.assign({},Hf),{nonce:Hf.rawNonce}))}_credential(If){return w(If.idToken||If.accessToken,"argument-error"),ne._fromParams(Object.assign(Object.assign({},If),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(Jf){return Ef.oauthCredentialFromTaggedObject(Jf)}static credentialFromError(Kf){return Ef.oauthCredentialFromTaggedObject(Kf.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:Lf}){if(!Lf)return null;const{oauthIdToken:Mf,oauthAccessToken:Nf,oauthTokenSecret:Of,pendingToken:Pf,nonce:Qf,providerId:Rf}=Lf;if(!Nf&&!Of&&!Mf&&!Pf)return null;if(!Rf)return null;try{return new Ef(Rf)._credential({idToken:Mf,accessToken:Nf,nonce:Qf,pendingToken:Pf})}catch(Sf){return null}}}class Tf extends Cf{constructor(){super("facebook.com")}static credential(Uf){return ne._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.FACEBOOK_SIGN_IN_METHOD,accessToken:Uf})}static credentialFromResult(Vf){return Tf.credentialFromTaggedObject(Vf)}static credentialFromError(Wf){return Tf.credentialFromTaggedObject(Wf.customData||{})}static credentialFromTaggedObject({_tokenResponse:Xf}){if(!Xf||!("oauthAccessToken"in Xf))return null;if(!Xf.oauthAccessToken)return null;try{return Tf.credential(Xf.oauthAccessToken)}catch(Yf){return null}}}Tf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tf.PROVIDER_ID="facebook.com";class Zf extends Cf{constructor(){super("google.com"),this.addScope("profile")}static credential($f,_f){return ne._fromParams({providerId:Zf.PROVIDER_ID,signInMethod:Zf.GOOGLE_SIGN_IN_METHOD,idToken:$f,accessToken:_f})}static credentialFromResult(ag){return Zf.credentialFromTaggedObject(ag)}static credentialFromError(bg){return Zf.credentialFromTaggedObject(bg.customData||{})}static credentialFromTaggedObject({_tokenResponse:cg}){if(!cg)return null;const{oauthIdToken:dg,oauthAccessToken:eg}=cg;if(!dg&&!eg)return null;try{return Zf.credential(dg,eg)}catch(fg){return null}}}Zf.GOOGLE_SIGN_IN_METHOD="google.com",Zf.PROVIDER_ID="google.com";class gg extends Cf{constructor(){super("github.com")}static credential(hg){return ne._fromParams({providerId:gg.PROVIDER_ID,signInMethod:gg.GITHUB_SIGN_IN_METHOD,accessToken:hg})}static credentialFromResult(ig){return gg.credentialFromTaggedObject(ig)}static credentialFromError(jg){return gg.credentialFromTaggedObject(jg.customData||{})}static credentialFromTaggedObject({_tokenResponse:kg}){if(!kg||!("oauthAccessToken"in kg))return null;if(!kg.oauthAccessToken)return null;try{return gg.credential(kg.oauthAccessToken)}catch(lg){return null}}}gg.GITHUB_SIGN_IN_METHOD="github.com",gg.PROVIDER_ID="github.com";class mg extends Gd{constructor(ng,og){super(ng,ng),this.pendingToken=og}_getIdTokenResponse(pg){const qg=this.buildRequest();return me(pg,qg)}_linkToIdToken(rg,sg){const tg=this.buildRequest();return tg.idToken=sg,me(rg,tg)}_getReauthenticationResolver(ug){const vg=this.buildRequest();return vg.autoCreate=!1,me(ug,vg)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(wg){const xg="string"==typeof wg?JSON.parse(wg):wg,{providerId:yg,signInMethod:zg,pendingToken:Ag}=xg;return yg&&zg&&Ag&&yg===zg?new mg(yg,Ag):null}static _create(Bg,Cg){return new mg(Bg,Cg)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dg extends yf{constructor(Eg){w(Eg.startsWith("saml."),"argument-error"),super(Eg)}static credentialFromResult(Fg){return Dg.samlCredentialFromTaggedObject(Fg)}static credentialFromError(Gg){return Dg.samlCredentialFromTaggedObject(Gg.customData||{})}static credentialFromJSON(Hg){const Ig=mg.fromJSON(Hg);return w(Ig,"argument-error"),Ig}static samlCredentialFromTaggedObject({_tokenResponse:Jg}){if(!Jg)return null;const{pendingToken:Kg,providerId:Lg}=Jg;if(!Kg||!Lg)return null;try{return mg._create(Lg,Kg)}catch(Mg){return null}}}class Ng extends Cf{constructor(){super("twitter.com")}static credential(Og,Pg){return ne._fromParams({providerId:Ng.PROVIDER_ID,signInMethod:Ng.TWITTER_SIGN_IN_METHOD,oauthToken:Og,oauthTokenSecret:Pg})}static credentialFromResult(Qg){return Ng.credentialFromTaggedObject(Qg)}static credentialFromError(Rg){return Ng.credentialFromTaggedObject(Rg.customData||{})}static credentialFromTaggedObject({_tokenResponse:Sg}){if(!Sg)return null;const{oauthAccessToken:Tg,oauthTokenSecret:Ug}=Sg;if(!Tg||!Ug)return null;try{return Ng.credential(Tg,Ug)}catch(Vg){return null}}}async function Wg(a,b){return R(a,"POST","/v1/accounts:signUp",O(a,b))}Ng.TWITTER_SIGN_IN_METHOD="twitter.com",Ng.PROVIDER_ID="twitter.com";class Xg{constructor(Yg){this.user=Yg.user,this.providerId=Yg.providerId,this._tokenResponse=Yg._tokenResponse,this.operationType=Yg.operationType}static async _fromIdTokenResponse(Zg,$g,_g,ah=!1){const bh=await Ha._fromIdTokenResponse(Zg,_g,ah),ch=ih(_g),dh=new Xg({user:bh,providerId:ch,_tokenResponse:_g,operationType:$g});return dh}static async _forOperation(eh,fh,gh){await eh._updateTokensIfNecessary(gh,!0);const hh=ih(gh);return new Xg({user:eh,providerId:hh,_tokenResponse:gh,operationType:fh})}}function ih(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}async function jh(a){var b;const c=yd(a);if(await c._initializationPromise,null===(b=c.currentUser)|| void 0===b?void 0:b.isAnonymous)return new Xg({user:c.currentUser,providerId:null,operationType:"signIn"});const d=await Wg(c,{returnSecureToken:!0}),e=await Xg._fromIdTokenResponse(c,"signIn",d,!0);return await c._updateCurrentUser(e.user),e}class kh extends e.ZR{constructor(lh,mh,nh,oh){var ph;super(mh.code,mh.message),this.operationType=nh,this.user=oh,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:lh.name,tenantId:null!==(ph=lh.tenantId)&& void 0!==ph?ph:void 0,_serverResponse:mh.customData._serverResponse,operationType:nh}}static _fromErrorAndOperation(qh,rh,sh,th){return new kh(qh,rh,sh,th)}}function uh(a,b,c,d){const e="reauthenticate"===b?c._getReauthenticationResolver(a):c._getIdTokenResponse(a);return e.catch(c=>{if("auth/multi-factor-auth-required"===c.code)throw kh._fromErrorAndOperation(a,c,b,d);throw c})}function vh(a){return new Set(a.map(({providerId:a})=>a).filter(a=>!!a))}async function wh(a,b){const c=(0,e.m9)(a);await yh(!0,c,b);const{providerUserInfo:d}=await X(c.auth,{idToken:await c.getIdToken(),deleteProvider:[b]}),f=vh(d||[]);return c.providerData=c.providerData.filter(a=>f.has(a.providerId)),f.has("phone")||(c.phoneNumber=null),await c.auth._persistUserIfCurrent(c),c}async function xh(a,b,c=!1){const d=await ba(a,b._linkToIdToken(a.auth,await a.getIdToken()),c);return Xg._forOperation(a,"link",d)}async function yh(a,b,c){await ha(b);const d=vh(b.providerData);w(d.has(c)===a,b.auth,!1===a?"provider-already-linked":"no-such-provider")}async function zh(a,b,c=!1){const{auth:d}=a;try{const e=await ba(a,uh(d,"reauthenticate",b,a),c);w(e.idToken,d,"internal-error");const f=aa(e.idToken);w(f,d,"internal-error");const{sub:g}=f;return w(a.uid===g,d,"user-mismatch"),Xg._forOperation(a,"reauthenticate",e)}catch(h){throw(null==h?void 0:h.code)==="auth/user-not-found"&&r(d,"user-mismatch"),h}}async function Ah(a,b,c=!1){const d=await uh(a,"signIn",b),e=await Xg._fromIdTokenResponse(a,"signIn",d);return c||await a._updateCurrentUser(e.user),e}async function Bh(a,b){return Ah(yd(a),b)}async function Ch(a,b){const c=(0,e.m9)(a);return await yh(!1,c,b.providerId),xh(c,b)}async function Dh(a,b){return zh((0,e.m9)(a),b)}async function Eh(a,b){return R(a,"POST","/v1/accounts:signInWithCustomToken",O(a,b))}async function Fh(a,b){const c=yd(a),d=await Eh(c,{token:b,returnSecureToken:!0}),e=await Xg._fromIdTokenResponse(c,"signIn",d);return await c._updateCurrentUser(e.user),e}class Gh{constructor(Hh,Ih){this.factorId=Hh,this.uid=Ih.mfaEnrollmentId,this.enrollmentTime=new Date(Ih.enrolledAt).toUTCString(),this.displayName=Ih.displayName}static _fromServerResponse(Jh,Kh){return"phoneInfo"in Kh?Lh._fromServerResponse(Jh,Kh):r(Jh,"internal-error")}}class Lh extends Gh{constructor(Mh){super("phone",Mh),this.phoneNumber=Mh.phoneInfo}static _fromServerResponse(Nh,Oh){return new Lh(Oh)}}function Ph(a,b,c){var d;w((null===(d=c.url)|| void 0===d?void 0:d.length)>0,a,"invalid-continue-uri"),w(void 0===c.dynamicLinkDomain||c.dynamicLinkDomain.length>0,a,"invalid-dynamic-link-domain"),b.continueUrl=c.url,b.dynamicLinkDomain=c.dynamicLinkDomain,b.canHandleCodeInApp=c.handleCodeInApp,c.iOS&&(w(c.iOS.bundleId.length>0,a,"missing-ios-bundle-id"),b.iOSBundleId=c.iOS.bundleId),c.android&&(w(c.android.packageName.length>0,a,"missing-android-pkg-name"),b.androidInstallApp=c.android.installApp,b.androidMinimumVersionCode=c.android.minimumVersion,b.androidPackageName=c.android.packageName)}async function Qh(a,b,c){const d=(0,e.m9)(a),f={requestType:"PASSWORD_RESET",email:b};c&&Ph(d,f,c),await Td(d,f)}async function Rh(a,b,c){await Nd((0,e.m9)(a),{oobCode:b,newPassword:c})}async function Sh(a,b){await Pd((0,e.m9)(a),{oobCode:b})}async function Th(a,b){const c=(0,e.m9)(a),d=await Nd(c,{oobCode:b}),f=d.requestType;switch(w(f,c,"internal-error"),f){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":w(d.newEmail,c,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":w(d.mfaInfo,c,"internal-error");default:w(d.email,c,"internal-error")}let g=null;return d.mfaInfo&&(g=Gh._fromServerResponse(yd(c),d.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===d.requestType?d.newEmail:d.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===d.requestType?d.email:d.newEmail)||null,multiFactorInfo:g},operation:f}}async function Uh(a,b){const{data:c}=await Th((0,e.m9)(a),b);return c.email}async function Vh(a,b,c){const d=yd(a),e=await Wg(d,{returnSecureToken:!0,email:b,password:c}),f=await Xg._fromIdTokenResponse(d,"signIn",e);return await d._updateCurrentUser(f.user),f}function Wh(a,b,c){return Bh((0,e.m9)(a),sf.credential(b,c))}async function Xh(a,b,c){const d=(0,e.m9)(a),f={requestType:"EMAIL_SIGNIN",email:b};w(c.handleCodeInApp,d,"argument-error"),c&&Ph(d,f,c),await Ud(d,f)}function Yh(a,b){const c=cf.parseLink(b);return(null==c?void 0:c.operation)==="EMAIL_SIGNIN"}async function Zh(a,b,c){const d=(0,e.m9)(a),f=sf.credentialWithLink(b,c||B());return w(f._tenantId===(d.tenantId||null),d,"tenant-id-mismatch"),Bh(d,f)}async function $h(a,b){return P(a,"POST","/v1/accounts:createAuthUri",O(a,b))}async function _h(a,b){const c=C()?B():"http://localhost",{signinMethods:d}=await $h((0,e.m9)(a),{identifier:b,continueUri:c});return d||[]}async function ai(a,b){const c=(0,e.m9)(a),d=await a.getIdToken(),f={requestType:"VERIFY_EMAIL",idToken:d};b&&Ph(c.auth,f,b);const{email:g}=await Sd(c.auth,f);g!==a.email&&await a.reload()}async function bi(a,b,c){const d=(0,e.m9)(a),f=await a.getIdToken(),g={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:f,newEmail:b};c&&Ph(d.auth,g,c);const{email:h}=await Vd(d.auth,g);h!==a.email&&await a.reload()}async function ci(a,b){return P(a,"POST","/v1/accounts:update",b)}async function di(a,{displayName:b,photoURL:c}){if(void 0!==b|| void 0!==c){const d=(0,e.m9)(a),f=await d.getIdToken(),g=await ba(d,ci(d.auth,{idToken:f,displayName:b,photoUrl:c,returnSecureToken:!0}));d.displayName=g.displayName||null,d.photoURL=g.photoUrl||null;const h=d.providerData.find(({providerId:a})=>"password"===a);h&&(h.displayName=d.displayName,h.photoURL=d.photoURL),await d._updateTokensIfNecessary(g)}}function ei(a,b){return gi((0,e.m9)(a),b,null)}function fi(a,b){return gi((0,e.m9)(a),null,b)}async function gi(a,b,c){const{auth:d}=a,e=await a.getIdToken(),f={idToken:e,returnSecureToken:!0};b&&(f.email=b),c&&(f.password=c);const g=await ba(a,Od(d,f));await a._updateTokensIfNecessary(g,!0)}class hi{constructor(ii,ji,ki={}){this.isNewUser=ii,this.providerId=ji,this.profile=ki}}class li extends hi{constructor(mi,ni,oi,pi){super(mi,ni,oi),this.username=pi}}class qi extends hi{constructor(ri,si){super(ri,"facebook.com",si)}}class ti extends li{constructor(ui,vi){super(ui,"github.com",vi,"string"==typeof(null==vi?void 0:vi.login)?null==vi?void 0:vi.login:null)}}class wi extends hi{constructor(xi,yi){super(xi,"google.com",yi)}}class zi extends li{constructor(Ai,Bi,Ci){super(Ai,"twitter.com",Bi,Ci)}}function Di(a){const{user:b,_tokenResponse:c}=a;return b.isAnonymous&&!c?{providerId:null,isNewUser:!1,profile:null}:(function(a){var b,c;if(!a)return null;const{providerId:d}=a,e=a.rawUserInfo?JSON.parse(a.rawUserInfo):{},f=a.isNewUser||"identitytoolkit#SignupNewUserResponse"===a.kind;if(!d&&(null==a?void 0:a.idToken)){const g=null===(c=null===(b=aa(a.idToken))|| void 0===b?void 0:b.firebase)|| void 0===c?void 0:c.sign_in_provider;if(g){const h="anonymous"!==g&&"custom"!==g?g:null;return new hi(f,h)}}if(!d)return null;switch(d){case"facebook.com":return new qi(f,e);case"github.com":return new ti(f,e);case"google.com":return new wi(f,e);case"twitter.com":return new zi(f,e,a.screenName||null);case"custom":case"anonymous":return new hi(f,null);default:return new hi(f,d,e)}})(c)}class Ei{constructor(Fi,Gi){this.type=Fi,this.credential=Gi}static _fromIdtoken(Hi){return new Ei("enroll",Hi)}static _fromMfaPendingCredential(Ii){return new Ei("signin",Ii)}toJSON(){const Ji="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[Ji]:this.credential}}}static fromJSON(Ki){var Li,Mi;if(null==Ki?void 0:Ki.multiFactorSession){if(null===(Li=Ki.multiFactorSession)|| void 0===Li?void 0:Li.pendingCredential)return Ei._fromMfaPendingCredential(Ki.multiFactorSession.pendingCredential);if(null===(Mi=Ki.multiFactorSession)|| void 0===Mi?void 0:Mi.idToken)return Ei._fromIdtoken(Ki.multiFactorSession.idToken)}return null}}class Ni{constructor(Oi,Pi,Qi){this.session=Oi,this.hints=Pi,this.signInResolver=Qi}static _fromError(Ri,Si){const Ti=yd(Ri),Ui=Si.customData._serverResponse,Vi=(Ui.mfaInfo||[]).map(a=>Gh._fromServerResponse(Ti,a));w(Ui.mfaPendingCredential,Ti,"internal-error");const Wi=Ei._fromMfaPendingCredential(Ui.mfaPendingCredential);return new Ni(Wi,Vi,async a=>{const b=await a._process(Ti,Wi);delete Ui.mfaInfo,delete Ui.mfaPendingCredential;const c=Object.assign(Object.assign({},Ui),{idToken:b.idToken,refreshToken:b.refreshToken});switch(Si.operationType){case"signIn":const d=await Xg._fromIdTokenResponse(Ti,Si.operationType,c);return await Ti._updateCurrentUser(d.user),d;case"reauthenticate":return w(Si.user,Ti,"internal-error"),Xg._forOperation(Si.user,Si.operationType,c);default:r(Ti,"internal-error")}})}async resolveSignIn(Xi){return this.signInResolver(Xi)}}function Yi(a,b){var c;const d=(0,e.m9)(a),f=b;return w(b.customData.operationType,d,"argument-error"),w(null===(c=f.customData._serverResponse)|| void 0===c?void 0:c.mfaPendingCredential,d,"argument-error"),Ni._fromError(d,f)}class Zi{constructor($i){this.user=$i,this.enrolledFactors=[],$i._onReload(a=>{a.mfaInfo&&(this.enrolledFactors=a.mfaInfo.map(a=>Gh._fromServerResponse($i.auth,a)))})}static _fromUser(_i){return new Zi(_i)}async getSession(){return Ei._fromIdtoken(await this.user.getIdToken())}async enroll(aj,bj){const cj=await this.getSession(),dj=await ba(this.user,aj._process(this.user.auth,cj,bj));return await this.user._updateTokensIfNecessary(dj),this.user.reload()}async unenroll(ej){const fj="string"==typeof ej?ej:ej.uid,gj=await this.user.getIdToken(),hj=await ba(this.user,P(this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",O(this.user.auth,{idToken:gj,mfaEnrollmentId:fj})));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==fj),await this.user._updateTokensIfNecessary(hj);try{await this.user.reload()}catch(ij){if("auth/user-token-expired"!==ij.code)throw ij}}}const jj=new WeakMap();function kj(a){const b=(0,e.m9)(a);return jj.has(b)||jj.set(b,Zi._fromUser(b)),jj.get(b)}class lj{constructor(mj,nj){this.storageRetriever=mj,this.type=nj}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)}catch(oj){return Promise.resolve(!1)}}_set(pj,qj){return this.storage.setItem(pj,JSON.stringify(qj)),Promise.resolve()}_get(rj){const sj=this.storage.getItem(rj);return Promise.resolve(sj?JSON.parse(sj):null)}_remove(tj){return this.storage.removeItem(tj),Promise.resolve()}get storage(){return this.storageRetriever()}}class uj extends lj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(a,b)=>this.onStorageEvent(a,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=(function(){const a=(0,e.z$)();return rc(a)||xc(a)})()&&(function(){try{return!!(window&&window!==window.top)}catch(a){return!1}})(),this.fallbackToPolling=zc(),this._shouldAllowMigration=!0}forAllChangedKeys(vj){for(const wj of Object.keys(this.listeners)){const xj=this.storage.getItem(wj),yj=this.localCache[wj];xj!==yj&&vj(wj,yj,xj)}}onStorageEvent(zj,Aj=!1){if(!zj.key){this.forAllChangedKeys((a,b,c)=>{this.notifyListeners(a,c)});return}const Bj=zj.key;if(Aj?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Cj=this.storage.getItem(Bj);if(zj.newValue!==Cj)null!==zj.newValue?this.storage.setItem(Bj,zj.newValue):this.storage.removeItem(Bj);else if(this.localCache[Bj]===zj.newValue&&!Aj)return}const Dj=()=>{const a=this.storage.getItem(Bj);(Aj||this.localCache[Bj]!==a)&&this.notifyListeners(Bj,a)},Ej=this.storage.getItem(Bj);(0,e.w1)()&&10===document.documentMode&&Ej!==zj.newValue&&zj.newValue!==zj.oldValue?setTimeout(Dj,10):Dj()}notifyListeners(Fj,Gj){this.localCache[Fj]=Gj;const Hj=this.listeners[Fj];if(Hj)for(const Ij of Array.from(Hj))Ij(Gj?JSON.parse(Gj):Gj)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((a,b,c)=>{this.onStorageEvent(new StorageEvent("storage",{key:a,oldValue:b,newValue:c}),!0)})},1000)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(Jj,Kj){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[Jj]||(this.listeners[Jj]=new Set(),this.localCache[Jj]=this.storage.getItem(Jj)),this.listeners[Jj].add(Kj)}_removeListener(Lj,Mj){this.listeners[Lj]&&(this.listeners[Lj].delete(Mj),0===this.listeners[Lj].size&&delete this.listeners[Lj]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(Nj,Oj){await super._set(Nj,Oj),this.localCache[Nj]=JSON.stringify(Oj)}async _get(Pj){const Qj=await super._get(Pj);return this.localCache[Pj]=JSON.stringify(Qj),Qj}async _remove(Rj){await super._remove(Rj),delete this.localCache[Rj]}}uj.type="LOCAL";const Sj=uj;class Tj extends lj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(Uj,Vj){}_removeListener(Wj,Xj){}}Tj.type="SESSION";const Yj=Tj;class Zj{constructor($j){this.eventTarget=$j,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_j){const ak=this.receivers.find(a=>a.isListeningto(_j));if(ak)return ak;const bk=new Zj(_j);return this.receivers.push(bk),bk}isListeningto(ck){return this.eventTarget===ck}async handleEvent(dk){var ek;const fk=dk,{eventId:gk,eventType:hk,data:ik}=fk.data,jk=this.handlersMap[hk];if(null==jk?void 0:jk.size){fk.ports[0].postMessage({status:"ack",eventId:gk,eventType:hk});const kk=Array.from(jk).map(async a=>a(fk.origin,ik)),lk=await (ek=kk,Promise.all(ek.map(async a=>{try{const b=await a;return{fulfilled:!0,value:b}}catch(c){return{fulfilled:!1,reason:c}}})));fk.ports[0].postMessage({status:"done",eventId:gk,eventType:hk,response:lk})}}_subscribe(mk,nk){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[mk]||(this.handlersMap[mk]=new Set()),this.handlersMap[mk].add(nk)}_unsubscribe(ok,pk){this.handlersMap[ok]&&pk&&this.handlersMap[ok].delete(pk),pk&&0!==this.handlersMap[ok].size||delete this.handlersMap[ok],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qk(a="",b=10){let c="";for(let d=0;d<b;d++)c+=Math.floor(10*Math.random());return a+c}Zj.receivers=[];class rk{constructor(sk){this.target=sk,this.handlers=new Set()}removeMessageHandler(tk){tk.messageChannel&&(tk.messageChannel.port1.removeEventListener("message",tk.onMessage),tk.messageChannel.port1.close()),this.handlers.delete(tk)}async _send(uk,vk,wk=50){const xk="undefined"!=typeof MessageChannel?new MessageChannel():null;if(!xk)throw new Error("connection_unavailable");let yk,zk;return new Promise((a,b)=>{const c=qk("",20);xk.port1.start();const d=setTimeout(()=>{b(new Error("unsupported_event"))},wk);zk={messageChannel:xk,onMessage(e){const f=e;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),yk=setTimeout(()=>{b(new Error("timeout"))},3000);break;case"done":clearTimeout(yk),a(f.data.response);break;default:clearTimeout(d),clearTimeout(yk),b(new Error("invalid_response"));break}}},this.handlers.add(zk),xk.port1.addEventListener("message",zk.onMessage),this.target.postMessage({eventType:uk,eventId:c,data:vk},[xk.port2])}).finally(()=>{zk&&this.removeMessageHandler(zk)})}}function Ak(){return window}function Bk(){return void 0!==Ak().WorkerGlobalScope&&"function"==typeof Ak().importScripts}async function Ck(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{const a=await navigator.serviceWorker.ready;return a.active}catch(b){return null}}class Dk{constructor(Ek){this.request=Ek}toPromise(){return new Promise((a,b)=>{this.request.addEventListener("success",()=>{a(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function Fk(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Gk(){const a=indexedDB.open("firebaseLocalStorageDb",1);return new Promise((b,c)=>{a.addEventListener("error",()=>{c(a.error)}),a.addEventListener("upgradeneeded",()=>{const b=a.result;try{b.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(d){c(d)}}),a.addEventListener("success",async()=>{const c=a.result;c.objectStoreNames.contains("firebaseLocalStorage")?b(c):(c.close(),await function(){const a=indexedDB.deleteDatabase("firebaseLocalStorageDb");return new Dk(a).toPromise()}(),b(await Gk()))})})}async function Hk(a,b,c){const d=Fk(a,!0).put({["fbase_key"]:b,value:c});return new Dk(d).toPromise()}async function Ik(a,b){const c=Fk(a,!1).get(b),d=await new Dk(c).toPromise();return void 0===d?null:d.value}function Jk(a,b){const c=Fk(a,!0).delete(b);return new Dk(c).toPromise()}class Kk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Gk()),this.db}async _withRetries(Lk){let Mk=0;for(;;)try{const Nk=await this._openDb();return await Lk(Nk)}catch(Ok){if(Mk++ >3)throw Ok;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zj._getInstance(Bk()?self:null),this.receiver._subscribe("keyChanged",async(a,b)=>{const c=await this._poll();return{keyProcessed:c.includes(b.key)}}),this.receiver._subscribe("ping",async(a,b)=>["keyChanged"])}async initializeSender(){var Pk,Qk;if(this.activeServiceWorker=await Ck(),this.activeServiceWorker){this.sender=new rk(this.activeServiceWorker);const Rk=await this.sender._send("ping",{},800);!!Rk&&(null===(Pk=Rk[0])|| void 0===Pk?void 0:Pk.fulfilled)&&(null===(Qk=Rk[0])|| void 0===Qk?void 0:Qk.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}}async notifyServiceWorker(Sk){var Tk;if(this.sender&&this.activeServiceWorker&&((null===(Tk=null==navigator?void 0:navigator.serviceWorker)|| void 0===Tk?void 0:Tk.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:Sk},this.serviceWorkerReceiverAvailable?800:50)}catch(Uk){}}async _isAvailable(){try{if(!indexedDB)return!1;const Vk=await Gk();return await Hk(Vk,"__sak","1"),await Jk(Vk,"__sak"),!0}catch(Wk){}return!1}async _withPendingWrite(Xk){this.pendingWrites++;try{await Xk()}finally{this.pendingWrites--}}async _set(Yk,Zk){return this._withPendingWrite(async()=>(await this._withRetries(a=>Hk(a,Yk,Zk)),this.localCache[Yk]=Zk,this.notifyServiceWorker(Yk)))}async _get($k){const _k=await this._withRetries(a=>Ik(a,$k));return this.localCache[$k]=_k,_k}async _remove(al){return this._withPendingWrite(async()=>(await this._withRetries(a=>Jk(a,al)),delete this.localCache[al],this.notifyServiceWorker(al)))}async _poll(){const bl=await this._withRetries(a=>{const b=Fk(a,!1).getAll();return new Dk(b).toPromise()});if(!bl)return[];if(0!==this.pendingWrites)return[];const cl=[],dl=new Set();for(const{fbase_key:el,value:fl}of bl)dl.add(el),JSON.stringify(this.localCache[el])!==JSON.stringify(fl)&&(this.notifyListeners(el,fl),cl.push(el));for(const gl of Object.keys(this.localCache))this.localCache[gl]&&!dl.has(gl)&&(this.notifyListeners(gl,null),cl.push(gl));return cl}notifyListeners(hl,il){this.localCache[hl]=il;const jl=this.listeners[hl];if(jl)for(const kl of Array.from(jl))kl(il)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(ll,ml){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[ll]||(this.listeners[ll]=new Set(),this._get(ll)),this.listeners[ll].add(ml)}_removeListener(nl,ol){this.listeners[nl]&&(this.listeners[nl].delete(ol),0===this.listeners[nl].size&&delete this.listeners[nl]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kk.type="LOCAL";const pl=Kk;async function ql(a){return(await P(a,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}function rl(a){return new Promise((b,c)=>{var d,e;const f=document.createElement("script");f.setAttribute("src",a),f.onload=b,f.onerror=a=>{const b=s("internal-error");b.customData=a,c(b)},f.type="text/javascript",f.charset="UTF-8",(null!==(e=null===(d=document.getElementsByTagName("head"))|| void 0===d?void 0:d[0])&& void 0!==e?e:document).appendChild(f)})}function sl(a){return`__${a}${Math.floor(10e5*Math.random())}`}class tl{constructor(ul){this.auth=ul,this.counter=10e11,this._widgets=new Map()}render(vl,wl){const xl=this.counter;return this._widgets.set(xl,new Fl(vl,this.auth.name,wl||{})),this.counter++,xl}reset(yl){var zl;const Al=yl||10e11;null===(zl=this._widgets.get(Al))|| void 0===zl||zl.delete(),this._widgets.delete(Al)}getResponse(Bl){var Cl;return(null===(Cl=this._widgets.get(Bl||10e11))|| void 0===Cl?void 0:Cl.getResponse())||""}async execute(Dl){var El;return null===(El=this._widgets.get(Dl||10e11))|| void 0===El||El.execute(),""}}class Fl{constructor(Gl,Hl,Il){this.params=Il,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Jl="string"==typeof Gl?document.getElementById(Gl):Gl;w(Jl,"argument-error",{appName:Hl}),this.container=Jl,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=Kl(50);const{callback:a,"expired-callback":b}=this.params;if(a)try{a(this.responseToken)}catch(c){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch(a){}this.isVisible&&this.execute()},60e3)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Kl(a){const b=[];for(let c=0;c<a;c++)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random())));return b.join("")}const Ll=sl("rcb"),Ml=new E(30e3,60e3);class Nl{constructor(Ol,Pl=Object.assign({},{theme:"light",type:"image"}),Ql){this.parameters=Pl,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set(),this.renderPromise=null,this.recaptcha=null,this.auth=yd(Ql),this.isInvisible="invisible"===this.parameters.size,w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Rl="string"==typeof Ol?document.getElementById(Ol):Ol;w(Rl,this.auth,"argument-error"),this.container=Rl,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new class{async load(Sl){return new tl(Sl)}clearedOneInstance(){}}():new class{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ak().grecaptcha}load(Tl,Ul=""){var Vl;return(w((Vl=Ul).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(Vl),Tl,"argument-error"),this.shouldResolveImmediately(Ul))?Promise.resolve(Ak().grecaptcha):new Promise((a,b)=>{const c=Ak().setTimeout(()=>{b(s(Tl,"network-request-failed"))},Ml.get());Ak()[Ll]=()=>{Ak().clearTimeout(c),delete Ak()[Ll];const d=Ak().grecaptcha;if(!d){b(s(Tl,"internal-error"));return}const e=d.render;d.render=(a,b)=>{const c=e(a,b);return this.counter++,c},this.hostLanguage=Ul,a(d)};const d=`https://www.google.com/recaptcha/api.js??${(0,e.xO)({onload:Ll,render:"explicit",hl:Ul})}`;rl(d).catch(()=>{clearTimeout(c),b(s(Tl,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(Wl){return!!Ak().grecaptcha&&(Wl===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}(),this.validateStartingState()}async verify(){this.assertNotDestroyed();const Xl=await this.render(),Yl=this.getAssertedRecaptcha(),Zl=Yl.getResponse(Xl);return Zl||new Promise(a=>{const b=c=>{c&&(this.tokenChangeListeners.delete(b),a(c))};this.tokenChangeListeners.add(b),this.isInvisible&&Yl.execute(Xl)})}render(){try{this.assertNotDestroyed()}catch($l){return Promise.reject($l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(a=>{throw this.renderPromise=null,a})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(a=>{this.container.removeChild(a)})}validateStartingState(){w(!this.parameters.sitekey,this.auth,"argument-error"),w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_l){return a=>{if(this.tokenChangeListeners.forEach(b=>b(a)),"function"==typeof _l)_l(a);else if("string"==typeof _l){const b=Ak()[_l];"function"==typeof b&&b(a)}}}assertNotDestroyed(){w(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let am=this.container;if(!this.isInvisible){const bm=document.createElement("div");am.appendChild(bm),am=bm}this.widgetId=this.getAssertedRecaptcha().render(am,this.parameters)}return this.widgetId}async init(){w(C()&&!Bk(),this.auth,"internal-error"),await dm(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const cm=await ql(this.auth);w(cm,this.auth,"internal-error"),this.parameters.sitekey=cm}getAssertedRecaptcha(){return w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function dm(){let a=null;return new Promise(b=>{if("complete"===document.readyState){b();return}a=()=>b(),window.addEventListener("load",a)}).catch(b=>{throw a&&window.removeEventListener("load",a),b})}class em{constructor(fm,gm){this.verificationId=fm,this.onConfirmation=gm}confirm(hm){const im=Ke._fromVerification(this.verificationId,hm);return this.onConfirmation(im)}}async function jm(a,b,c){const d=yd(a),f=await mm(d,b,(0,e.m9)(c));return new em(f,a=>Bh(d,a))}async function km(a,b,c){const d=(0,e.m9)(a);await yh(!1,d,"phone");const f=await mm(d.auth,b,(0,e.m9)(c));return new em(f,a=>Ch(d,a))}async function lm(a,b,c){const d=(0,e.m9)(a),f=await mm(d.auth,b,(0,e.m9)(c));return new em(f,a=>Dh(d,a))}async function mm(a,b,c){var d,e,f,g,h;const i=await c.verify();try{w("string"==typeof i,a,"argument-error"),w("recaptcha"===c.type,a,"argument-error");let j;if(j="string"==typeof b?{phoneNumber:b}:b,"session"in j){const k=j.session;if("phoneNumber"in j){w("enroll"===k.type,a,"internal-error");const l=await (e=a,f={idToken:k.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:i}},P(e,"POST","/v2/accounts/mfaEnrollment:start",O(e,f)));return l.phoneSessionInfo.sessionInfo}{w("signin"===k.type,a,"internal-error");const m=(null===(d=j.multiFactorHint)|| void 0===d?void 0:d.uid)||j.multiFactorUid;w(m,a,"missing-multi-factor-info");const n=await (g=a,h={mfaPendingCredential:k.credential,mfaEnrollmentId:m,phoneSignInInfo:{recaptchaToken:i}},P(g,"POST","/v2/accounts/mfaSignIn:start",O(g,h)));return n.phoneResponseInfo.sessionInfo}}{const{sessionInfo:o}=await Fe(a,{phoneNumber:j.phoneNumber,recaptchaToken:i});return o}}finally{c._reset()}}async function nm(a,b){await xh((0,e.m9)(a),b)}class om{constructor(pm){this.providerId=om.PROVIDER_ID,this.auth=yd(pm)}verifyPhoneNumber(qm,rm){return mm(this.auth,qm,(0,e.m9)(rm))}static credential(sm,tm){return Ke._fromVerification(sm,tm)}static credentialFromResult(um){return om.credentialFromTaggedObject(um)}static credentialFromError(vm){return om.credentialFromTaggedObject(vm.customData||{})}static credentialFromTaggedObject({_tokenResponse:wm}){if(!wm)return null;const{phoneNumber:xm,temporaryProof:ym}=wm;return xm&&ym?Ke._fromTokenResponse(xm,ym):null}}function zm(a,b){return b?A(b):(w(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}om.PROVIDER_ID="phone",om.PHONE_SIGN_IN_METHOD="phone";class Am extends Gd{constructor(Bm){super("custom","custom"),this.params=Bm}_getIdTokenResponse(Cm){return me(Cm,this._buildIdpRequest())}_linkToIdToken(Dm,Em){return me(Dm,this._buildIdpRequest(Em))}_getReauthenticationResolver(Fm){return me(Fm,this._buildIdpRequest())}_buildIdpRequest(Gm){const Hm={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return Gm&&(Hm.idToken=Gm),Hm}}function Im(a){return Ah(a.auth,new Am(a),a.bypassAuthState)}function Jm(a){const{auth:b,user:c}=a;return w(c,b,"internal-error"),zh(c,new Am(a),a.bypassAuthState)}async function Km(a){const{auth:b,user:c}=a;return w(c,b,"internal-error"),xh(c,new Am(a),a.bypassAuthState)}class Lm{constructor(Mm,Nm,Om,Pm,Qm=!1){this.auth=Mm,this.resolver=Om,this.user=Pm,this.bypassAuthState=Qm,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(Nm)?Nm:[Nm]}execute(){return new Promise(async(a,b)=>{this.pendingPromise={resolve:a,reject:b};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(c){this.reject(c)}})}async onAuthEvent(Rm){const{urlResponse:Sm,sessionId:Tm,postBody:Um,tenantId:Vm,error:Wm,type:Xm}=Rm;if(Wm){this.reject(Wm);return}const Ym={auth:this.auth,requestUri:Sm,sessionId:Tm,tenantId:Vm||void 0,postBody:Um||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(Xm)(Ym))}catch(Zm){this.reject(Zm)}}onError($m){this.reject($m)}getIdpTask(_m){switch(_m){case"signInViaPopup":case"signInViaRedirect":return Im;case"linkViaPopup":case"linkViaRedirect":return Km;case"reauthViaPopup":case"reauthViaRedirect":return Jm;default:r(this.auth,"internal-error")}}resolve(an){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(an),this.unregisterAndCleanUp()}reject(bn){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(bn),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cn=new E(2000,10e3);async function dn(a,b,c){const d=yd(a);u(a,b,yf);const e=zm(d,c),f=new gn(d,"signInViaPopup",b,e);return f.executeNotNull()}async function en(a,b,c){const d=(0,e.m9)(a);u(d.auth,b,yf);const f=zm(d.auth,c),g=new gn(d.auth,"reauthViaPopup",b,f,d);return g.executeNotNull()}async function fn(a,b,c){const d=(0,e.m9)(a);u(d.auth,b,yf);const f=zm(d.auth,c),g=new gn(d.auth,"linkViaPopup",b,f,d);return g.executeNotNull()}class gn extends Lm{constructor(hn,jn,kn,ln,mn){super(hn,jn,ln,mn),this.provider=kn,this.authWindow=null,this.pollId=null,gn.currentPopupAction&&gn.currentPopupAction.cancel(),gn.currentPopupAction=this}async executeNotNull(){const nn=await this.execute();return w(nn,this.auth,"internal-error"),nn}async onExecution(){y(1===this.filter.length,"Popup operations only handle one event");const on=qk();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],on),this.authWindow.associatedEvent=on,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var pn;return(null===(pn=this.authWindow)|| void 0===pn?void 0:pn.associatedEvent)||null}cancel(){this.reject(s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gn.currentPopupAction=null}pollUserCancellation(){const qn=()=>{var a,b;if(null===(b=null===(a=this.authWindow)|| void 0===a?void 0:a.window)|| void 0===b?void 0:b.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(s(this.auth,"popup-closed-by-user"))},2000);return}this.pollId=window.setTimeout(qn,cn.get())};qn()}}gn.currentPopupAction=null;const rn=new Map();class sn extends Lm{constructor(tn,un,vn=!1){super(tn,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],un,void 0,vn),this.eventId=null}async execute(){let wn=rn.get(this.auth._key());if(!wn){try{const xn=await Cn(this.resolver,this.auth),yn=xn?await super.execute():null;wn=()=>Promise.resolve(yn)}catch(zn){wn=()=>Promise.reject(zn)}rn.set(this.auth._key(),wn)}return this.bypassAuthState||rn.set(this.auth._key(),()=>Promise.resolve(null)),wn()}async onAuthEvent(An){if("signInViaRedirect"===An.type)return super.onAuthEvent(An);if("unknown"===An.type){this.resolve(null);return}if(An.eventId){const Bn=await this.auth._redirectUserForId(An.eventId);if(Bn)return this.user=Bn,super.onAuthEvent(An);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cn(a,b){const c=Gn(b),d=Fn(a);if(!await d._isAvailable())return!1;const e=await d._get(c)==="true";return await d._remove(c),e}async function Dn(a,b){return Fn(a)._set(Gn(b),"true")}function En(){rn.clear()}function Fn(a){return A(a._redirectPersistence)}function Gn(a){return Ub("pendingRedirect",a.config.apiKey,a.name)}function Hn(a,b,c){return In(a,b,c)}async function In(a,b,c){const d=yd(a);u(a,b,yf);const e=zm(d,c);return await Dn(e,d),e._openRedirect(d,b,"signInViaRedirect")}function Jn(a,b,c){return Kn(a,b,c)}async function Kn(a,b,c){const d=(0,e.m9)(a);u(d.auth,b,yf);const f=zm(d.auth,c);await Dn(f,d.auth);const g=await Pn(d);return f._openRedirect(d.auth,b,"reauthViaRedirect",g)}function Ln(a,b,c){return Mn(a,b,c)}async function Mn(a,b,c){const d=(0,e.m9)(a);u(d.auth,b,yf);const f=zm(d.auth,c);await yh(!1,d,b.providerId),await Dn(f,d.auth);const g=await Pn(d);return f._openRedirect(d.auth,b,"linkViaRedirect",g)}async function Nn(a,b){return await yd(a)._initializationPromise,On(a,b,!1)}async function On(a,b,c=!1){const d=yd(a),e=zm(d,b),f=new sn(d,e,c),g=await f.execute();return g&&!c&&(delete g.user._redirectEventId,await d._persistUserIfCurrent(g.user),await d._setRedirectUser(null,b)),g}async function Pn(a){const b=qk(`${a.uid}:::`);return a._redirectEventId=b,await a.auth._setRedirectUser(a),await a.auth._persistUserIfCurrent(a),b}class Qn{constructor(Rn){this.auth=Rn,this.cachedEventUids=new Set(),this.consumers=new Set(),this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(Sn){this.consumers.add(Sn),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,Sn)&&(this.sendToConsumer(this.queuedRedirectEvent,Sn),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(Tn){this.consumers.delete(Tn)}onEvent(Un){if(this.hasEventBeenHandled(Un))return!1;let Vn=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(Un,a)&&(Vn=!0,this.sendToConsumer(Un,a),this.saveEventToCache(Un))}),this.hasHandledPotentialRedirect||!go(Un)||(this.hasHandledPotentialRedirect=!0,Vn||(this.queuedRedirectEvent=Un,Vn=!0)),Vn}sendToConsumer(Wn,Xn){var Yn;if(Wn.error&&!fo(Wn)){const Zn=(null===(Yn=Wn.error.code)|| void 0===Yn?void 0:Yn.split("auth/")[1])||"internal-error";Xn.onError(s(this.auth,Zn))}else Xn.onAuthEvent(Wn)}isEventForConsumer($n,_n){const ao=null===_n.eventId|| !!$n.eventId&&$n.eventId===_n.eventId;return _n.filter.includes($n.type)&&ao}hasEventBeenHandled(bo){return Date.now()-this.lastProcessedEventTime>=60e4&&this.cachedEventUids.clear(),this.cachedEventUids.has(eo(bo))}saveEventToCache(co){this.cachedEventUids.add(eo(co)),this.lastProcessedEventTime=Date.now()}}function eo(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(a=>a).join("-")}function fo({type:a,error:b}){return"unknown"===a&&(null==b?void 0:b.code)==="auth/no-auth-event"}function go(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fo(a);default:return!1}}async function ho(a,b={}){return P(a,"GET","/v1/projects",b)}const io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jo=/^https?/;async function ko(a){if(!a.config.emulator){const{authorizedDomains:b}=await ho(a);for(const c of b)try{if(lo(c))return}catch(d){}r(a,"unauthorized-domain")}}function lo(a){const b=B(),{protocol:c,hostname:d}=new URL(b);if(a.startsWith("chrome-extension://")){const e=new URL(a);return""===e.hostname&&""===d?"chrome-extension:"===c&&a.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===c&&e.hostname===d}if(!jo.test(c))return!1;if(io.test(a))return d===a;const f=a.replace(/\./g,"\\."),g=new RegExp("^(.+\\."+f+"|"+f+")$","i");return g.test(d)}const mo=new E(30e3,60e3);function no(){const a=Ak().___jsl;if(null==a?void 0:a.H){for(const b of Object.keys(a.H))if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=[...a.H[b].L],a.CP)for(let c=0;c<a.CP.length;c++)a.CP[c]=null}}let oo=null;const po=new E(5000,15000),qo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ro=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function so(a){var b,c;const d=await (b=a,oo=oo||(c=b,new Promise((a,b)=>{var d,e,f;function g(){no(),gapi.load("gapi.iframes",{callback:()=>{a(gapi.iframes.getContext())},ontimeout:()=>{no(),b(s(c,"network-request-failed"))},timeout:mo.get()})}if(null===(e=null===(d=Ak().gapi)|| void 0===d?void 0:d.iframes)|| void 0===e?void 0:e.Iframe)a(gapi.iframes.getContext());else if(null===(f=Ak().gapi)|| void 0===f?void 0:f.load)g();else{const h=sl("iframefcb");return Ak()[h]=()=>{gapi.load?g():b(s(c,"network-request-failed"))},rl(`https://apis.google.com/js/api.js?onload=${h}`)}}).catch(a=>{throw oo=null,a}))),g=Ak().gapi;return w(g,a,"internal-error"),d.open({where:document.body,url:function(a){const b=a.config;w(b.authDomain,a,"auth-domain-config-required");const c=b.emulator?H(b,"emulator/auth/iframe"):`https://${a.config.authDomain}/__/auth/iframe`,d={apiKey:b.apiKey,appName:a.name,v:f.SDK_VERSION},g=ro.get(a.config.apiHost);g&&(d.eid=g);const h=a._getFrameworks();return h.length&&(d.fw=h.join(",")),`${c}?${(0,e.xO)(d).slice(1)}`}(a),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qo,dontclear:!0},b=>new Promise(async(c,d)=>{await b.restyle({setHideOnLeave:!1});const e=s(a,"network-request-failed"),f=Ak().setTimeout(()=>{d(e)},po.get());function g(){Ak().clearTimeout(f),c(b)}b.ping(g).then(g,()=>{d(e)})}))}const to={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uo{constructor(vo){this.window=vo,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(wo){}}}function xo(a,b,c,d,g,h){w(a.config.authDomain,a,"auth-domain-config-required"),w(a.config.apiKey,a,"invalid-api-key");const i={apiKey:a.config.apiKey,appName:a.name,authType:c,redirectUrl:d,v:f.SDK_VERSION,eventId:g};if(b instanceof yf)for(const[j,k]of(b.setDefaultLanguage(a.languageCode),i.providerId=b.providerId||"",(0,e.xb)(b.getCustomParameters())||(i.customParameters=JSON.stringify(b.getCustomParameters())),Object.entries(h||{})))i[j]=k;if(b instanceof Cf){const l=b.getScopes().filter(a=>""!==a);l.length>0&&(i.scopes=l.join(","))}a.tenantId&&(i.tid=a.tenantId);const m=i;for(const n of Object.keys(m))void 0===m[n]&&delete m[n];return`${yo(a)}?${(0,e.xO)(m).slice(1)}`}function yo({config:a}){return a.emulator?H(a,"emulator/auth/handler"):`https://${a.authDomain}/__/auth/handler`}const zo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yj,this._completeRedirectFn=On}async _openPopup(Ao,Bo,Co,Do){var Eo;y(null===(Eo=this.eventManagers[Ao._key()])|| void 0===Eo?void 0:Eo.manager,"_initialize() not called before _openPopup()");const Fo=xo(Ao,Bo,Co,B(),Do);return(function(a,b,c,d=500,f=600){const g=Math.max((window.screen.availHeight-f)/2,0).toString(),h=Math.max((window.screen.availWidth-d)/2,0).toString();let i="";const j=Object.assign(Object.assign({},to),{width:d.toString(),height:f.toString(),top:g,left:h}),k=(0,e.z$)().toLowerCase();c&&(i=sc(k)?"_blank":c),qc(k)&&(b=b||"http://localhost",j.scrollbars="yes");const l=Object.entries(j).reduce((a,[b,c])=>`${a}${b}=${c},`,"");if((function(a=(0,e.z$)()){var b;return xc(a)&&!!(null===(b=window.navigator)|| void 0===b?void 0:b.standalone)})(k)&&"_self"!==i)return(function(a,b){const c=document.createElement("a");c.href=a,c.target=b;const d=document.createEvent("MouseEvent");d.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),c.dispatchEvent(d)})(b||"",i),new uo(null);const m=window.open(b||"",i,l);w(m,a,"popup-blocked");try{m.focus()}catch(n){}return new uo(m)})(Ao,Fo,qk())}async _openRedirect(Go,Ho,Io,Jo){var Ko;return await this._originValidation(Go),Ko=xo(Go,Ho,Io,B(),Jo),Ak().location.href=Ko,new Promise(()=>{})}_initialize(Lo){const Mo=Lo._key();if(this.eventManagers[Mo]){const{manager:No,promise:Oo}=this.eventManagers[Mo];return No?Promise.resolve(No):(y(Oo,"If manager is not set, promise should be"),Oo)}const Po=this.initAndGetManager(Lo);return this.eventManagers[Mo]={promise:Po},Po}async initAndGetManager(Qo){const Ro=await so(Qo),So=new Qn(Qo);return Ro.register("authEvent",a=>{w(null==a?void 0:a.authEvent,Qo,"invalid-auth-event");const b=So.onEvent(a.authEvent);return{status:b?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[Qo._key()]={manager:So},this.iframes[Qo._key()]=Ro,So}_isIframeWebStorageSupported(To,Uo){const Vo=this.iframes[To._key()];Vo.send("webStorageSupport",{type:"webStorageSupport"},a=>{var b;const c=null===(b=null==a?void 0:a[0])|| void 0===b?void 0:b.webStorageSupport;void 0!==c&&Uo(!!c),r(To,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(Wo){const Xo=Wo._key();return this.originValidationPromises[Xo]||(this.originValidationPromises[Xo]=ko(Wo)),this.originValidationPromises[Xo]}get _shouldInitProactively(){return zc()||rc()||xc()}};class Yo{constructor(Zo){this.factorId=Zo}_process($o,_o,ap){switch(_o.type){case"enroll":return this._finalizeEnroll($o,_o.credential,ap);case"signin":return this._finalizeSignIn($o,_o.credential);default:return x("unexpected MultiFactorSessionType")}}}class bp extends Yo{constructor(cp){super("phone"),this.credential=cp}static _fromCredential(dp){return new bp(dp)}_finalizeEnroll(ep,fp,gp){var hp;return P(hp=ep,"POST","/v2/accounts/mfaEnrollment:finalize",O(hp,{idToken:fp,displayName:gp,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(ip,jp){var kp;return P(kp=ip,"POST","/v2/accounts/mfaSignIn:finalize",O(kp,{mfaPendingCredential:jp,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class lp{constructor(){}static assertion(mp){return bp._fromCredential(mp)}}lp.FACTOR_ID="phone";class np{constructor(op){this.auth=op,this.internalListeners=new Map()}getUid(){var pp;return this.assertAuthConfigured(),(null===(pp=this.auth.currentUser)|| void 0===pp?void 0:pp.uid)||null}async getToken(qp){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const rp=await this.auth.currentUser.getIdToken(qp);return{accessToken:rp}}addAuthTokenListener(sp){if(this.assertAuthConfigured(),!this.internalListeners.has(sp)){const tp=this.auth.onIdTokenChanged(a=>{var b;sp((null===(b=a)|| void 0===b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(sp,tp),this.updateProactiveRefresh()}}removeAuthTokenListener(up){this.assertAuthConfigured();const vp=this.internalListeners.get(up);vp&&(this.internalListeners.delete(up),vp(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wp(a=(0,f.getApp)()){const b=(0,f._getProvider)(a,"auth");return b.isInitialized()?b.getImmediate():(function(a,b){const c=(0,f._getProvider)(a,"auth");if(c.isInitialized()){const d=c.getImmediate(),g=c.getOptions();if((0,e.vZ)(g,null!=b?b:{}))return d;r(d,"already-initialized")}const h=c.initialize({options:b});return h})(a,{popupRedirectResolver:zo,persistence:[pl,Sj,Yj]})}d="Browser",(0,f._registerComponent)(new i.wA("auth",(a,{options:b})=>{const c=a.getProvider("app").getImmediate(),{apiKey:e,authDomain:f}=c.options;return(a=>{w(e&&!e.includes(":"),"invalid-api-key",{appName:a.name}),w(!(null==f?void 0:f.includes(":")),"argument-error",{appName:a.name});const c={apiKey:e,authDomain:f,clientPlatform:d,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ac(d)},g=new Bc(a,c);return(function(a,b){const c=(null==b?void 0:b.persistence)||[],d=(Array.isArray(c)?c:[c]).map(A);(null==b?void 0:b.errorMap)&&a._updateErrorMap(b.errorMap),a._initializeWithPersistence(d,null==b?void 0:b.popupRedirectResolver)})(g,b),g})(c)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((a,b,c)=>{const d=a.getProvider("auth-internal");d.initialize()})),(0,f._registerComponent)(new i.wA("auth-internal",a=>{var b;const c=yd(a.getProvider("auth").getImmediate());return b=c,new np(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,f.registerVersion)("@firebase/auth","0.19.2",function(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(d)),(0,f.registerVersion)("@firebase/auth","0.19.2","esm2017")}}])